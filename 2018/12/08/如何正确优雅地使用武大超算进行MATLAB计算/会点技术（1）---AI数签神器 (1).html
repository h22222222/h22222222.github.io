<h2 id="会点技术（1）—AI数签神器"><a href="#会点技术（1）—AI数签神器" class="headerlink" title="会点技术（1）—AI数签神器"></a>会点技术（1）—AI数签神器</h2><p>&emsp;&emsp;<br>&emsp;&emsp;无意间在社群看到一个百度飞桨的推广活动，用简单的几步就可以解决在吃串串香的时候人工数签子的痛点，很是吸引我，最初是本着薅羊毛的精神报名了这个《AI数签神器创造营》，在体验下来之后觉得，在人工智能盛行的当下，很多不是专业的研究人员还是距离人工智能挺远的，对于一些专业的点，没有知识背景是无法快速上手的。百度飞桨将这些高级的功能融合在生活的场景里，让人们在短时间内就可以独立完成一个小任务，体验到人工智能赋能生活的乐趣，是一个不错的尝试，也体现出技术源于生活，最终回归生活的初衷。<br>&emsp;&emsp;<br>EasyDL零门槛AI开发平台官网：<a href="https://ai.baidu.com/easydl/">https://ai.baidu.com/easydl/</a><br>EasyDL是一个面向企业和个人开发者的零门槛AI开发平台，为零算法基础的开发者提供定制高精度AI模型的服务，包括数据处理、模型训练、服务管理、模型部署功能模块。零代码交互式获取AI能力模型，助力各行业快速实现AI赋能。<br>EasyDL产品矩阵：<br>{图片1}</p>
<p>这次的数签活动需要用到的是图像类下面的物体检测模块：<br>{图片2}<br>具体的流程为：创建模型-导入数据-数据标注-模型训练-模型校验-模型发布<br>{图片3}<br>&emsp;&emsp;</p>
<h3 id="1-创建模型"><a href="#1-创建模型" class="headerlink" title="1. 创建模型"></a>1. 创建模型</h3><p>&emsp;&emsp;<br>&emsp;&emsp;创建一个图像检测模型即可。<br>&emsp;&emsp;</p>
<h3 id="2-数据处理"><a href="#2-数据处理" class="headerlink" title="2. 数据处理"></a>2. 数据处理</h3><p>&emsp;&emsp;<br>&emsp;&emsp;导入数据后，需要对数据进行标注（在该图像识别例子下即：要识别的物体是什么，需要告诉计算机一些学习的例子）。打标签的方式有两种：在线标注（人工）或智能标注。<br>&emsp;&emsp;<br><strong>1）在线标注</strong><br>&emsp;&emsp;（打标工具人，适合样本量不大的时候，如果样本众多，可能会对眼睛造成一些不适）：<br>&emsp;&emsp;这里只能选择矩形框选，因此在绘制时需要注意框选时尽可能不要包含多余的背景，否则可能会对训练造成一定影响。为什么没有圆形或者多边形框选工具呢，或者类似PS抠图的工具？是因为背景对训练的影响不大吗？<br>{图片4}<br>{图片5}<br>&emsp;&emsp;<br><strong>2）智能标注：</strong><br>&emsp;&emsp;智能标注功能可通过系统自动筛选出数据集中难例图片（最关键需优先标注的图片），用户只需标注数据集30%左右的难例数据即可训练模型，以减少数据标注的人力投入。包含两种方式：主动学习和指定模型。<br>&emsp;&emsp;<br>&emsp;&emsp;<strong>主动学习：</strong><br>&emsp;&emsp;1.启动智能标注<br>&emsp;&emsp;在每个标签下的图⽚（图像分类单标签）或者标注框数（物体检测、图像分割）都达到10个时⽅可启动<br>&emsp;&emsp;2.系统筛选难例<br>&emsp;&emsp;根据数据集情况，系统自动筛选出数据集中难例图片（最关键需优先标注的图片），进行自动预标注<br>&emsp;&emsp;3.用户标注难例<br>&emsp;&emsp;针对展示预标注结果的难例，您可通过两种方式完成标注：第一，基于单张图片进行手动标注；第二，在预标注效果符合预期基础上，选择一键标注<br>&emsp;&emsp;4.完成标注，启动训练<br>&emsp;&emsp;可以根据实际情况，选择系统为您进行下一轮难例筛选（系统最多支持4轮难例筛选），或对当前预标注效果满意进入立即训练<br>&emsp;&emsp;<br>&emsp;&emsp;<strong>指定模型：</strong><br>&emsp;&emsp;1.用户选中模型<br>&emsp;&emsp;智能标注底层模型可复用来自EasyDL、BML已训练完成的模型或主动学习类智能标注任务成功完成后积累的模型<br>&emsp;&emsp;2.启动智能标注<br>&emsp;&emsp;您可根据任务时长预估表，查看任务预估时长<br>&emsp;&emsp;3.系统自动标注<br>&emsp;&emsp;系统将根据您选择的模型自动为所有未标注图片进行预标注<br>&emsp;&emsp;4.用户确认标注结果<br>&emsp;&emsp;针对预标注结果您可手动确认，也可通过一键保存按钮完成所有图片的自动确认，确认后图片升级为已标状态<br>&emsp;&emsp;</p>
<h2 id="3-训练模型"><a href="#3-训练模型" class="headerlink" title="3. 训练模型"></a>3. 训练模型</h2><p>&emsp;&emsp;<br>&emsp;&emsp;训练配置-添加数据-选择训练环境，用最基础的训练环境，17张标签图大概要训练1.5h左右，选择高精度版本时间会更长一些。<br>{图片6}<br>{图片7}</p>
<p>&emsp;&emsp;这里需要说一点，添加自定义验证集和测试集：<br>&emsp;&emsp;<strong>1）添加自定义验证集</strong><br>&emsp;&emsp;AI模型在训练时，每训练一批数据会进行模型效果检验，以某一张验证图片作为验证数据，通过验证结果反馈去调节训练。可以简单地把AI模型训练理解为学生学习，训练集则为每天的上课内容，验证集即为每周的课后作业，质量更高的每周课后作业能够更好的指导学生学习并找寻自己的不足，从而提高成绩。同理AI模型训练的验证集也是这个功效。<br>注：学生的课后作业应该与上课内容对应，这样才能巩固知识。因此，验证集的标签也应与训练集完全一致。<br>&emsp;&emsp;<br>&emsp;&emsp;<strong>2）添加自定义测试集</strong><br>&emsp;&emsp;如果学生的期末考试是平时的练习题，那么学生可能通过记忆去解题，而不是通过学习的方法去做题，所以期末考试的试题应与平时作业不能一样，才能检验学生的学习成果。那么同理，AI模型的效果测试不能使用训练数据进行测试，应使用训练数据集外的数据测试，这样才能真实的反映模型效果。<br>注：期末考试的内容属于学期的内容，但不一定需要完全包括所学内容。同理，测试集的标签是训练集的全集或者子集即可。<br>&emsp;&emsp;</p>
<h2 id="4-校验模型"><a href="#4-校验模型" class="headerlink" title="4. 校验模型"></a>4. 校验模型</h2><p>&emsp;&emsp;<br>&emsp;&emsp;生成模型校验评估报告</p>
<p>&emsp;&emsp;mAP(mean average precision)是物体检测(Object Detection)算法中衡量算法效果的指标。对于物体检测任务，每一类object都可以计算出其精确率(Precision)和召回率(Recall)，在不同阈值下多次计算/试验，每个类都可以得到一条P-R曲线，曲线下的面积就是average。<br>&emsp;&emsp;精确率为该阈值下正确预测的物体数与预测物体总数之比。<br>&emsp;&emsp;召回率为该阈值下正确预测的物体数与真实物体数之比。<br>{图片8}<br>&emsp;&emsp;<br>&emsp;&emsp;<strong>科普：</strong><br>&emsp;&emsp;F1分数（F1-score）是分类问题的一个衡量指标。一些多分类问题的机器学习竞赛，常常将F1-score作为最终测评的方法。它是精确率和召回率的调和平均数，最大为1，最小为0。<br>&emsp;&emsp;此外还有F2分数和F0.5分数。F1分数认为召回率和精确率同等重要，F2分数认为召回率的重要程度是精确率的2倍，而F0.5分数认为召回率的重要程度是精确率的一半。<br>&emsp;&emsp;计算公式：<br> &emsp;&emsp;$F_1 = 2<em>(precision</em>recall)/(precision+recall)$<br>&emsp;&emsp;计算过程：<a href="https://www.cnblogs.com/yucen/p/9912063.html">参考</a><br>&emsp;&emsp;<strong>1）首先定义以下几个概念</strong><br>&emsp;&emsp;TP（True Positive）：预测答案正确<br>&emsp;&emsp;FP（False Positive）：错将其他类预测为本类<br>&emsp;&emsp;FN（False Negative）：本类标签预测为其他类标<br>&emsp;&emsp;<strong>2）计算精准度和召回率</strong><br>&emsp;&emsp;精准度(precision)：指被分类器判定正例中的正样本的比重（如果选择计算模式为高精度，则会认为精准度优先）<br> &emsp;&emsp;$precision_k =  \cfrac{TP} {(TP+FP)}$ </p>
<p>&emsp;&emsp;召回率(recall)：指的是被预测为正例的占总的正例的比重<br> &emsp;&emsp;$recall_k =  \cfrac{TP}{(TP+FN)}$ </p>
<p>&emsp;&emsp;准确率(accuracy)：代表分类器对整个样本判断正确的比重。<br> &emsp;&emsp;$accuracy =  \cfrac{(TP+TN)}{(TP+TN+FP+FN)}$ </p>
<p>&emsp;&emsp;<strong>3）通过第二步计算结果计算每个类别下的F1-score</strong><br> &emsp;&emsp;$F1_k =  \cfrac{2<em>(precision_k</em>recall_k)}{(precision_k+recall_k)}$ </p>
<p>&emsp;&emsp;<strong>4）通过对第三步求得的各个类别下的F1-score求均值，得到最后的评测结果</strong>。<br> &emsp;&emsp;$score =  (\cfrac{1}{n}\displaystyle\sum F1_k）^2$<br>&emsp;&emsp;</p>
<ul>
<li>如何通过「完整评估结果」里的错误示例优化模型？<br>&emsp;&emsp;错误示例中，左侧是正确的结果，右侧是模型的识别结果<br>观察模型识别有误的图片有哪些共同点，并有针对性地补充训练数据。比如：当图片比较亮的时候模型都能识别正确，但比较暗的时候模型就识别错了。这时就需要补充比较暗的图片作为训练数据。<br>{图片9}<br>{图片10}<br>&emsp;&emsp;</li>
<li>实际调用服务时模型效果变差？<br>&emsp;&emsp;训练图片和实际场景要识别的图片拍摄环境应一致，举例：如果实际要识别的图片是摄像头俯拍的，那训练图片就不能用网上下载的目标正面图片。<br>&emsp;&emsp;每个标签的图片需要覆盖实际场景里面的可能性，如拍照角度、光线明暗的变化，训练集覆盖的场景越多，模型的泛化能力越强。<br>&emsp;&emsp;如果使用的是云服务，可以开通云服务数据管理功能，将实际调用云服务识别的图片加入训练集，不断迭代模型。</li>
</ul>
<h2 id="6-发布模型"><a href="#6-发布模型" class="headerlink" title="6. 发布模型"></a>6. 发布模型</h2><p>&emsp;&emsp;<br>&emsp;&emsp;发布公有云服务，将训练完成的模型部署在百度云服务器，通过API接口调用模型。每个公有云服务发布成功后享有10000点免费额度，仅作为该服务调用消耗。单次调用将根据选择的训练算法对应不同的点数单价，再根据实际调用消耗点数值计算费用。可以H5的形式在手机端体验，调用耗费：普通版5点/次。<br>{图片11}<br>&emsp;&emsp;<br>&emsp;&emsp;接口说明如下：<br>&emsp;&emsp;标准接口请求参考说明：<br>{图片12}</p>
<p>&emsp;&emsp;标准接口响应字段说明：<br>{图片13}<br>{图片14}<br>&emsp;&emsp;对于上传的图片的要求也是比较高的，我在这里上传的图片中上半部分像素很差，导致上半部分的竹签都没有识别出来，同时因为背景较为杂乱，一些不是竹签的字体也被误判了。要想获得较好的识别效果，一定要注意上传的图片是否背景简单，曝光度均匀同时物体清晰。</p>
<h2 id="5-彩蛋："><a href="#5-彩蛋：" class="headerlink" title="5. 彩蛋："></a>5. 彩蛋：</h2><p>&emsp;&emsp;<br>&emsp;&emsp;在【AI市场】-【我的已购模型】下有一个官方提供的口罩检测模型，用于识别戴口罩和没有戴口罩的情形，这个模型是免费的，可以直接用来训练业务数据。<br>&emsp;&emsp;<br>&emsp;&emsp;添加数据进行数据处理-数据打标（mask unmask）-训练模型，打标的时候需要注意一些异常case，比如下图，在这里我认为其实unmask，如果在具体的业务场景下认为是戴了口罩的话选择mask标签即可。<br>{图片15}<br>&emsp;&emsp;可以设置为训练完成后用短信形式提醒，在训练的时候就可以干其他事情啦。<br>{图片16}</p>
